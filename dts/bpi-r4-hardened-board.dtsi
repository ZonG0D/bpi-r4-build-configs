// SPDX-License-Identifier: MIT

#include <dt-bindings/gpio/gpio.h>
#include <dt-bindings/leds/common.h>

/*
 * This fragment only adds self-contained devices that do not rely on
 * upstream SoC/board labels. It avoids phandle edits to unknown nodes.
 */
 / {
    chosen { stdout-path = "serial0:115200n8"; };

    /* PWM fan hooked to SoC PWM ch0; 'pio' label is standard on MTK trees */
    fan: pwm-fan {
        compatible = "pwm-fan";
        cooling-levels = <0 80 128 255>;
        #cooling-cells = <2>;
        pwms = <&pwm 0 50000>;
        status = "okay";
    };

    gpio-leds {
        compatible = "gpio-leds";

        led_green: led-green {
            function = LED_FUNCTION_STATUS;
            color = <LED_COLOR_ID_GREEN>;
            gpios = <&pio 79 GPIO_ACTIVE_HIGH>;
            default-state = "on";
        };

        led_blue: led-blue {
            function = LED_FUNCTION_WPS;
            color = <LED_COLOR_ID_BLUE>;
            gpios = <&pio 63 GPIO_ACTIVE_HIGH>;
            default-state = "off";
        };
    };

    /* Board-fixed rails for convenience; do not override upstream regulators */
    reg_1p8v: regulator-1p8v {
        compatible = "regulator-fixed";
        regulator-name = "fixed-1.8V";
        regulator-min-microvolt = <1800000>;
        regulator-max-microvolt = <1800000>;
        regulator-boot-on;
        regulator-always-on;
    };

    reg_3p3v: regulator-3p3v {
        compatible = "regulator-fixed";
        regulator-name = "fixed-3.3V";
        regulator-min-microvolt = <3300000>;
        regulator-max-microvolt = <3300000>;
        regulator-boot-on;
        regulator-always-on;
    };

    /* --- OPTIONAL (commented) ---
     * SFP cages need known I2C mux and GMAC labels from your base DTS.
     * Once we confirm upstream names, uncomment and set i2c-bus + attach to GMAC.
     *
     * sfp1: sfp1 {
     *     compatible = "sff,sfp";
     *     i2c-bus = <&i2c_sfp1>;   // requires label in base DTS!
     *     maximum-power-milliwatt = <3000>;
     *     // los-gpios = <&pio ...>;
     * };
     *
     * sfp2: sfp2 { ... };
     */
};
